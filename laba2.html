<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style type="text/css">
        table {
            border: 4px solid black;
            background: gray;
        }
       
    </style>
    <title>Laba2</title>
</head>
<body>
    <p>The average salary = <span id="result"></span></p>
    <script>
        let workers = [
            {
                name: 'Pen',
                age: 25,
                salary: 200,
            },
            {
                name: 'Dep',
                age: 26,
                salary: 150,
            },
            {
                name: 'Dpe',
                age: 27,
                salary: 300,
            },
            {
                name: 'Mark',
                age: 28,
                salary: 170,
            },
        ];
        const worker = (function () {
            const fill = (workers) => {
                let table = document.createElement('table');
                let tr = document.createElement('tr');
                table.appendChild(tr);
                tr.appendChild(document.createElement('th'));
                tr.appendChild(document.createElement('th'));
                tr.appendChild(document.createElement('th'));
                let i = 0;
                table.rows[0].cells[i++].innerHTML = 'Name';
                table.rows[0].cells[i++].innerHTML = 'Age';
                table.rows[0].cells[i++].innerHTML = 'Salary';
                let j;
                i = 1;
                document.body.appendChild(table);
                workers.forEach(elem => {
                    j = 0;
                    let tr = document.createElement('tr');
                    table.appendChild(tr);
                    tr.appendChild(document.createElement('td'));
                    tr.appendChild(document.createElement('td'));
                    tr.appendChild(document.createElement('td'));
                    table.rows[i].cells[j++].innerHTML = elem.name;
                    table.rows[i].cells[j++].innerHTML = elem.age;
                    table.rows[i++].cells[j++].innerHTML = elem.salary;
                });
                av_Salary();
            };
            const av_Salary = () => {
                const table = document.querySelector('table');
                const result = document.querySelector('#result');
                let sum = 0;
                Array.from(table.children).forEach((child, index) => {
                    if (index !== 0) {
                        sum += +child.lastElementChild.textContent;
                    }
                });
                result.textContent = +(sum / workers.length).toFixed(2);
            }
            return {
                fill
            }
        })();
        worker.fill(workers);
    </script>
</body>
</html>